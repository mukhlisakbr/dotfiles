# -----------------------------
# Minimal Zsh Configuration for Starship
# -----------------------------

# Set history size
HISTSIZE=10000                 # Number of commands to keep in memory
SAVEHIST=10000                 # Number of commands to save in the history file

# History options
setopt HIST_IGNORE_DUPS        # Ignore duplicate commands in history
setopt HIST_IGNORE_ALL_DUPS    # Remove older duplicate commands
setopt HIST_IGNORE_SPACE       # Ignore commands starting with a space
setopt HIST_SAVE_NO_DUPS       # Do not save duplicate commands
setopt HIST_VERIFY             # Show command before running after history expansion
setopt SHARE_HISTORY           # Share history across multiple Zsh sessions

# Enable command auto-correction
setopt CORRECT                 # Suggest corrections for mistyped commands

# Enable case-insensitive globbing (e.g., ls *.PNG matches *.png)
setopt NO_CASE_GLOB

# Allow 'cd' by just typing a directory name
setopt AUTO_CD

# Enable tab completion system
autoload -Uz compinit          # Load Zsh completion system
compinit                       # Initialize completion

# Speed up completion by caching
zstyle ':completion:*' use-cache on    # Enable completion cache
zstyle ':completion:*' cache-path ~/.zsh/cache  # Set cache directory

# Initialize Starship prompt
eval "$(starship init zsh)"    # Load Starship as the prompt

# -----------------------------
# End of configuration
# -----------------------------

# zinit
source /opt/homebrew/opt/zinit/zinit.zsh

# Autosuggestions – load almost instantly after prompt
zinit ice wait"0" lucid atload'_zsh_autosuggest_start'
zinit light zsh-users/zsh-autosuggestions

# Completions – optimized with as"completion" and blockf
zinit ice wait"1" lucid blockf as"completion"
zinit light zsh-users/zsh-completions

# Syntax highlighting – must load last
zinit ice wait"2" lucid
zinit light zsh-users/zsh-syntax-highlighting

# zoxide
eval "$(zoxide init zsh)"

# eza
export EZA_CONFIG_DIR="$HOME/.config/eza"

# zsh alias
alias eza="eza --icons --sort=type"
alias l="eza"
alias ll="eza -l"
alias lla="eza -la"

alias lg="lazygit"
alias ld="lazydocker"
alias pn="pnpm"
alias wip='git add . && git commit -m "wip" && git push'

# bat
#export BAT_THEME="GitHub"

# fzf
FD_BASE="fd --strip-cwd-prefix"

# Generic fzf command
export FZF_DEFAULT_COMMAND="$FD_BASE --type f"

# For CTRL-T (files)
export FZF_CTRL_T_COMMAND="$FD_BASE --type f"

# For ALT-C (directories)
export FZF_ALT_C_COMMAND="$FD_BASE --type d"

# Previews
export FZF_CTRL_T_OPTS="--preview 'bat -n --color=always {}'"
export FZF_ALT_C_OPTS="--preview 'tree -C {} | head -200'"

source <(fzf --zsh)

# sublime
export PATH="/Applications/Sublime Text.app/Contents/SharedSupport/bin:$PATH"

# android and java
export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/build-tools/35.0.0

# lazygit
export XDG_CONFIG_HOME="$HOME/.config"

# yazi
function y() {
  local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
  yazi "$@" --cwd-file="$tmp"
  if cwd="$(command cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
    builtin cd -- "$cwd"
  fi
  rm -f -- "$tmp"
}

# gitignore
function gi() { curl -sLw "\n" https://www.toptal.com/developers/gitignore/api/$@ ;}

# Herd injected configuration.
export HERD_PHP_84_INI_SCAN_DIR="/Users/ghost/Library/Application Support/Herd/config/php/84/"
export PATH="/Users/ghost/Library/Application Support/Herd/bin/":$PATH

# Added by Windsurf
export PATH="/Users/ghost/.codeium/windsurf/bin:$PATH"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# term
export TERM=xterm-256color

# pnpm
export PNPM_HOME="/Users/ghost/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end
