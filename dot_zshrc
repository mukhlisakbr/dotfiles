# ohmyzsh
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME=""
plugins=(git)
source $ZSH/oh-my-zsh.sh

# starship
eval "$(starship init zsh)"

# zoxide z jump
eval "$(zoxide init zsh)"

# zinit
source /opt/homebrew/opt/zinit/zinit.zsh
zinit light zsh-users/zsh-autosuggestions
zinit light zsh-users/zsh-syntax-highlighting
zinit light jessarcher/zsh-artisan
zinit cdreplay -q

# eza
export EZA_CONFIG_DIR="$HOME/.config/eza"

# aliases ls
alias eza="eza --icons --sort=type"
alias l="eza"
alias ll="eza -l"
alias lla="eza -la"

# aliases git
alias lg="lazygit"
alias wip='git add . && git commit -m "wip" && git push'

# aliases other
alias oc="opencode"
alias cc="claude"
alias ccd="claude --dangerously-skip-permissions"

# fzf setup
FD_BASE="fd --strip-cwd-prefix"
export FZF_DEFAULT_OPTS=" \
--color=bg+:#313244,bg:#1E1E2E,spinner:#F5E0DC,hl:#F38BA8 \
--color=fg:#CDD6F4,header:#F38BA8,info:#CBA6F7,pointer:#F5E0DC \
--color=marker:#B4BEFE,fg+:#CDD6F4,prompt:#CBA6F7,hl+:#F38BA8 \
--color=selected-bg:#45475A \
--color=border:#6C7086,label:#CDD6F4"
export FZF_DEFAULT_COMMAND="$FD_BASE --type f"
export FZF_CTRL_T_COMMAND="$FD_BASE --type f"
export FZF_CTRL_T_OPTS="
  --preview 'bat -n --color=always {}'
  --preview-window=right:60%:wrap
  --bind 'ctrl-d:preview-page-down,ctrl-u:preview-page-up'
"
export FZF_ALT_C_COMMAND="$FD_BASE --type d"
export FZF_ALT_C_OPTS="
  --preview 'tree -C {} | head -200'
  --preview-window=right:60%:wrap
  --bind 'ctrl-d:preview-page-down,ctrl-u:preview-page-up'
"
source <(fzf --zsh)

# def editor
export EDITOR='nvim'

# timezone
export TZ='Asia/Jakarta'

# sublime
export PATH="/Applications/Sublime Text.app/Contents/SharedSupport/bin:$PATH"

# windsurf bin
export PATH="/Users/ghost/.codeium/windsurf/bin:$PATH"

# antigravity bin
export PATH="/Users/ghost/.antigravity/antigravity/bin:$PATH"

# bun global bin
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# java and android sdk
export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home
export ANDROID_HOME="$HOME/Library/Android/sdk"
export ANDROID_SDK_ROOT="$ANDROID_HOME"
export ANDROID_NDK_HOME="$ANDROID_HOME/ndk/29.0.14206865"
export PATH="$ANDROID_HOME/emulator:$ANDROID_HOME/platform-tools:$ANDROID_HOME/build-tools/36.1.0:$PATH"

# kiro
[[ "$TERM_PROGRAM" == "kiro" ]] && . "$(kiro --locate-shell-integration-path zsh)"

# Herd injected PHP bin and config
export PATH="/Users/ghost/Library/Application Support/Herd/bin/":$PATH
export HERD_PHP_82_INI_SCAN_DIR="/Users/ghost/Library/Application Support/Herd/config/php/82/"
export HERD_PHP_83_INI_SCAN_DIR="/Users/ghost/Library/Application Support/Herd/config/php/83/"
export HERD_PHP_84_INI_SCAN_DIR="/Users/ghost/Library/Application Support/Herd/config/php/84/"
export HERD_PHP_85_INI_SCAN_DIR="/Users/ghost/Library/Application Support/Herd/config/php/85/"

# Herd injected NVM config
export NVM_DIR="/Users/ghost/Library/Application Support/Herd/config/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[[ -f "/Applications/Herd.app/Contents/Resources/config/shell/zshrc.zsh" ]] && builtin source "/Applications/Herd.app/Contents/Resources/config/shell/zshrc.zsh"

# yazi 
function y() {
	local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
	yazi "$@" --cwd-file="$tmp"
	IFS= read -r -d '' cwd < "$tmp"
	[ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
	rm -f -- "$tmp"
}

# Mise activation
eval "$(mise activate zsh)"
